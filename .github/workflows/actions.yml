name: ACTIONS101
run-name: Pipeline run by @${{ github.actor }}

on:
  push:
    branches: ["main"]
  
env:
  PIPE: cicd

jobs:
  check:
    runs-on: self-hosted

    env:
      STAGE: JOB

    steps:
      - name: step level env
        env:
          stage: steps
        run: | 
          echo $env:STAGE
          echo $env:stage
          echo ${{runner.name}}
          echo ${{runner.os}}
          echo ${{runner.environment}}
          echo ${{secrets.PASSWORD}}
          echo ${{github.ref}}
          echo ${{github.repository}}
          echo ${{job.status}}

          echo ${{github.event.after}}
          echo ${{github.event.before}}
          echo ${{github.event.commits}}
          echo ${{github.event.compare}}


  prod_check:
    if: ${{github.ref == 'refs/heads/main'}}
    runs-on: self-hosted
    steps:
      - run: |
          echo Runner Name: ${{ runner.name }}
          echo OS: ${{ runner.os }}
          echo Arch: ${{ runner.arch }}
          echo Temp folder: ${{ runner.temp }}

  report-url:
    runs-on: self-hosted
    steps:
    - name: Show GitHub context
      run: |
        echo "REST API URL: $GITHUB_API_URL"
        echo "GraphQL URL: $GITHUB_GRAPHQL_URL"
        echo "Server URL: $GITHUB_SERVER_URL"
        echo "Repo checkout path: $GITHUB_WORKSPACE"
        echo "Event payload: $GITHUB_EVENT_PATH"